(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");if(o.length)for(var l=o.length-1;l>-1&&!t;)t=o[l--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{const t=e.p+"42970b2d7ce8340598b3.png",n=Object.freeze(["openLibQuery"]);let o;const l=()=>{if(o=document.getElementById("clearResultsButton"),!(o instanceof HTMLButtonElement))throw new TypeError(`${l.name}: ${null===o?"null":"non "+HTMLButtonElement.name} clear results button.`);return o};let s;const c=()=>{if(s=document.getElementById("saveResultsButton"),!(s instanceof HTMLButtonElement))throw new TypeError(`${c.name}: ${null===s?"null":"non "+HTMLButtonElement.name} save results button.`);return s};let r;const i=()=>{if(r=document.getElementById("clearSubjectsButton"),!(r instanceof HTMLButtonElement))throw new TypeError(`${i.name}: ${null===r?"null":"non "+HTMLButtonElement.name} clear subjects button.`);return r};let a;const d=()=>{if(a=document.getElementById("bookQueryResultCards"),!(a instanceof HTMLDivElement))throw new TypeError(`${d.name}: ${null===a?"null":"non "+HTMLDivElement.name} book query results card div.`);return a};let u;const h=()=>{if(u=document.getElementById("selectAllTopicsButton"),!(u instanceof HTMLButtonElement))throw new TypeError(`${h.name}: ${null===u?"null":"non "+HTMLButtonElement.name} select all topics button.`);return u};let m;const p=()=>{if(m=document.getElementById("deselectAllTopicsButton"),!(m instanceof HTMLButtonElement))throw new TypeError(`${p.name}: ${null===m?"null":"non "+HTMLButtonElement.name} select all topics button.`);return m};let f;const g=()=>{if(f=document.getElementById("queryResultLimit"),!(f instanceof HTMLInputElement))throw new TypeError(`${g.name}: ${null===f?"null":"non "+HTMLInputElement.name} query result number input.`);return f};let L;const E=()=>{if(L=document.getElementById("getRecommendationsButton"),!(L instanceof HTMLButtonElement))throw new TypeError(`${E.name}: ${null===L?"null":"non "+HTMLButtonElement.name} get recommendations button.`);return L};let b;const y=()=>{if(b=document.getElementById("topicVisibilityDropdown"),!(b instanceof HTMLSelectElement))throw new TypeError(`${y.name}: ${null===b?"null":"non "+HTMLSelectElement.name} topic visibility dropdown.`);return b};let w;const v=()=>{if(w=document.getElementsByClassName("topicCheckbox"),!(w instanceof HTMLCollection))throw new TypeError(`${v.name}: ${null===w?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==w.length)throw new RangeError(`${v.name}: expected 12 elements, but instead got ${w.length}`);for(let e=0;e<w.length;++e){const t=w.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${v.name}: ${null===t?"null":"non "+HTMLInputElement.name} topic checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${v.name}: topic ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`)}return w};let x;const T=()=>{if(x=document.getElementsByClassName("subjectCheckbox"),!(x instanceof HTMLCollection))throw new TypeError(`${T.name}: ${null===x?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(85!==x.length)throw new RangeError(`${T.name}: expected 80 elements, but instead got ${x.length}`);for(let e=0;e<x.length;++e){const t=x.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${T.name}: ${null===t?"null":"non "+HTMLInputElement.name} subject checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${T.name}: subject ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`);for(const e of n)if(void 0===t.dataset[e])throw new Error(`${T.name}: undefined dataset property for subject checkbox: "${e}"`)}return x};let $;const k=()=>{if($=document.getElementById("topicFieldsets")?.getElementsByTagName("fieldset"),!($ instanceof HTMLCollection))throw new TypeError(`${k.name}: ${null===$?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==$.length)throw new RangeError(`${k.name}: expected 12 elements, but instead got ${$.length}`);for(let e=0;e<$.length;++e){const t=$.item(e);if(!(t instanceof HTMLFieldSetElement))throw new TypeError(`${k.name}: ${null===t?"null":"non "+HTMLFieldSetElement.name} fieldset.`)}return $},C=e.p+"863c41354f8f48e66b97.svg",B=e.p+"5dfaf0de5d1c41fa290a.png",H=e.p+"57041bc9aad3ecc66f4e.png";function M(e,t,n,o){if("string"!=typeof e)return M(e.title,e.cover_i,e.author_name[0],e.subject);if(null==n)throw new TypeError(`${M.name}: ${n} author string.`);if(null==o)throw new TypeError(`${M.name}: ${o} subjects string array.`);const l=document.createElement("p");l.classList.add("underline","text-lg","text-center"),l.textContent=e;const s=t?`https://covers.openlibrary.org/b/id/${t}-M.jpg`:C,c=document.createElement("img");c.classList.add("mx-auto","my-2"),c.src=s,c.alt=t?`${e} by ${n} cover`:"No cover image available";const r=document.createElement("p");r.classList.add("text-center"),r.textContent="by "+n;const i=document.createElement("p");i.classList.add("font-semibold","mt-3"),i.innerHTML='Subjects<hr class="h-px border-0 bg-gray-400">';const a=document.createElement("p");a.style.height="7rem",a.style.overflowY="auto",a.textContent=o.join(", ");const d=document.createElement("div");return d.classList.add("p-2","border","border-solid","border-gray-400"),d.appendChild(l),d.appendChild(c),d.appendChild(r),d.appendChild(i),d.appendChild(a),function(e,t){if(e.querySelector(".icon-container"))return;const n=document.createElement("div");n.classList.add("flex","justify-end","top-2","right-2");const o=document.createElement("img");o.src=B,o.classList.add("inline-block","mr-3","cursor-pointer"),o.addEventListener("click",(t=>{t.stopPropagation(),function(e){const t=e.querySelector("p")||e.querySelector(".font-bold.text-orange"),n=e.querySelector("p")||e.querySelector(".font-semibold .text-green")||e.querySelector(".text-center"),o=e.querySelector("img"),l={title:t?t.textContent:"",author:n?n.textContent:"",cover:o?o.src:""},s=JSON.parse(localStorage.getItem("favoriteBooks")||"[]");s.push(l),localStorage.setItem("favoriteBooks",JSON.stringify(s))}(e)}));const l=document.createElement("img");l.src=H,l.classList.add("inline-block","cursor-pointer");const s=function(e,t){const n=document.createElement("div");return n.classList.add("shelf-dropdown","hidden","absolute","bg-white","rounded","shadow","mt-2","z-10"),t.forEach((o=>{const l=document.createElement("div");l.classList.add("absolute","cursor-pointer","p-2","hover:bg-gray-200"),l.textContent=o.name,l.addEventListener("click",(l=>{l.stopPropagation(),n.classList.add("hidden"),function(e,t,n){const o=e.querySelector(".font-bold.text-orange")||e.querySelector("p"),l=e.querySelector(".author"),s=e.querySelector("img"),c={title:o?o.textContent:"",author:l?l.textContent:"",cover:s?s.getAttribute("src"):""},r=n.find((e=>e.name===t));r&&(r.books||(r.books=[]),r.books.push(c)),localStorage.setItem("shelves",JSON.stringify(n))}(e,o.name,t)})),n.appendChild(l)})),n}(e,t);e.appendChild(s),l.addEventListener("click",(e=>{e.stopPropagation(),s.classList.contains("hidden")?s.classList.remove("hidden"):s.classList.add("hidden")})),n.appendChild(o),n.appendChild(l),e.appendChild(n)}(d,JSON.parse(localStorage.getItem("shelves")||"[]")),d}document.querySelector("body").prepend((()=>{const e=document.createElement("div");e.classList.add("flex","items-center");const n=document.createElement("img");n.width=125,n.height=100,n.src=t,n.alt="Bookworm logo";const o=document.createElement("h1");o.classList.add("text-pink","font-bold","text-4xl"),o.textContent="Book";const l=document.createElement("h1");l.classList.add("text-white","font-bold","text-4xl"),l.textContent="Worm",e.appendChild(n),e.appendChild(o),e.appendChild(l);const s=document.createElement("a");s.classList.add("inline-block","text-white","p-4","text-xl"),s.href="./index.html",s.textContent="Home";const c=document.createElement("a");c.classList.add("inline-block","text-white","p-4","text-xl"),c.href="./bestsellers.html",c.textContent="Bestsellers";const r=document.createElement("a");r.classList.add("inline-block","text-white","p-4","text-xl","whitespace-nowrap"),r.href="./for-you.html",r.textContent="For You";const i=document.createElement("a");i.classList.add("inline-block","text-white","p-4","text-xl"),i.href="./bookshelf.html",i.textContent="Bookshelf";const a=window.location.pathname;for(const e of[s,c,r,i])e.href.endsWith(a)&&e.classList.add("font-bold");const d=document.createElement("div");d.classList.add("flex","flex-nowrap"),d.appendChild(s),d.appendChild(c),d.appendChild(r),d.appendChild(i);const u=document.createElement("nav");return u.classList.add("flex","flex-wrap","justify-between","items-center","w-full","bg-green","px-8"),u.id="header",u.appendChild(e),u.appendChild(d),u})());const S=y(),I=h(),j=p(),q=v(),N=k(),R=g(),_=T(),O=i();R.value="12",S.value="show";for(let e=0;e<q.length;++e){const t=q.item(e);null!==t&&(t.checked=!1)}for(let e=0;e<_.length;++e){const t=_.item(e);null!==t&&(t.checked=!1)}var J,A,F,P,D;J=_,O.addEventListener("click",(()=>{for(let e=0;e<J.length;++e){const t=J.item(e);!0===t?.checked&&(t.checked=!1)}})),F=q,P=N,D=O,(A=S).addEventListener("change",(()=>{if("hide"!==A.value||D.classList.contains("hidden")){if("show"===A.value&&D.classList.contains("hidden"))for(let e=0;e<F.length;++e){const t=F.item(e);!0===t?.checked&&D.classList.remove("hidden")}}else D.classList.add("hidden");for(let e=0;e<F.length;++e){const t=F.item(e),n=null!==t?P.namedItem(t.name):null;"hide"!==A.value||null===n||n.classList.contains("hidden")?"show"===A.value&&!0===t?.checked&&null!==n&&n.classList.contains("hidden")&&n.classList.remove("hidden"):n.classList.add("hidden")}})),((e,t,n,o,l)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!1===n?.checked&&(n.checked=!0)}if("show"===n.value)for(let e=0;e<o.length;++e){const t=o.item(e);t?.classList.contains("hidden")&&t.classList.remove("hidden")}"show"===n.value&&l.classList.contains("hidden")&&l.classList.remove("hidden")}))})(I,q,S,N,O),((e,t,n,o)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!0===n?.checked&&(n.checked=!1)}for(let e=0;e<n.length;++e){const t=n.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}o.classList.contains("hidden")||o.classList.add("hidden")}))})(j,q,N,O),((e,t,n,o)=>{for(let l=0;l<e.length;++l){const s=e.item(l);s?.addEventListener("change",(()=>{const l=t.namedItem(s.name);!0===s.checked&&"show"===n.value?null!==l&&l.classList.contains("hidden")&&l.classList.remove("hidden"):null===l||l.classList.contains("hidden")||l.classList.add("hidden");e:for(let t=0;t<e.length;++t){const l=e.item(t);if(!0===l?.checked&&"show"===n.value&&o.classList.contains("hidden")){o.classList.remove("hidden");break e}o.classList.contains("hidden")||o.classList.add("hidden")}}))}})(q,N,S,O);const z=E(),Q=d(),W=c(),Y=l(),V=c(),G=new Set,K=[];var U,X,Z,ee,te,ne,oe,le,se,ce;U=G,X=_,Z=K,ee=Q,te=R,ne=S,oe=N,le=O,se=Y,ce=V,z.addEventListener("click",(async()=>{U.clear();for(let e=0;e<X.length;++e){const t=X.item(e),n=t?.dataset.openLibQuery;!0===t?.checked&&void 0!==n&&U.add(n)}if(0!==U.size){"show"===ne.value&&(ne.value="hide");for(let e=0;e<oe.length;++e){const t=oe.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}le.classList.contains("hidden")||le.classList.add("hidden"),0!==ee.children.length&&(ee.innerHTML=""),Z.length=0,await Promise.all(Array.from(U).map((async e=>{await(async(e,t)=>fetch(`https://openlibrary.org/search.json?${e}${null!=t?"&limit="+String(t):""}`).then((e=>e.json())))(e,parseInt(te.value)).then((e=>Z.push(...e.docs)))}))),Z.forEach((e=>{const t=M(e);ee.appendChild(t)})),se.classList.contains("hidden")&&se.classList.remove("hidden"),ce.classList.contains("hidden")&&ce.classList.remove("hidden")}})),((e,t,n,o)=>{e.addEventListener("click",(()=>{0!==t.children.length&&(t.innerHTML=""),0!==n.length&&(n.length=0),o.classList.contains("hidden")||o.classList.add("hidden"),e.classList.add("hidden")}))})(Y,Q,K,W),((e,t,n)=>{e.addEventListener("click",(()=>{if(0===n.length)return;const e=localStorage.getItem(t);let o=null!==e?JSON.parse(e):[];0===o.length?o=n:o.push(...n.filter((e=>o.every((t=>{return n=e,!(null!=(o=t)&&n.title===o.title&&n.cover_i===o.cover_i&&n.author_name.length===o.author_name.length&&n.subject.length===o.subject.length&&n.author_name.every((e=>o.author_name.includes(e)))&&n.subject.every((e=>o.subject.includes(e))));var n,o}))))),localStorage.setItem(t,JSON.stringify(o))}))})(V,"openLibDocs",K)})()})();
//# sourceMappingURL=for-you.bundle.min.mjs.map