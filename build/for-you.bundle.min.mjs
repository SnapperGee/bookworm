(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var l=n.getElementsByTagName("script");if(l.length)for(var o=l.length-1;o>-1&&!t;)t=l[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{const t=e.p+"42970b2d7ce8340598b3.png",n=Object.freeze(["openLibQuery"]);let l;const o=()=>{if(l=document.getElementById("clearResultsButton"),!(l instanceof HTMLButtonElement))throw new TypeError(`${o.name}: ${null===l?"null":"non "+HTMLButtonElement.name} clear results button.`);return l};let s;const c=()=>{if(s=document.getElementById("saveResultsButton"),!(s instanceof HTMLButtonElement))throw new TypeError(`${c.name}: ${null===s?"null":"non "+HTMLButtonElement.name} save results button.`);return s};let i;const r=()=>{if(i=document.getElementById("clearSubjectsButton"),!(i instanceof HTMLButtonElement))throw new TypeError(`${r.name}: ${null===i?"null":"non "+HTMLButtonElement.name} clear subjects button.`);return i};let a;const d=()=>{if(a=document.getElementById("bookQueryResultCards"),!(a instanceof HTMLDivElement))throw new TypeError(`${d.name}: ${null===a?"null":"non "+HTMLDivElement.name} book query results card div.`);return a};let u;const h=()=>{if(u=document.getElementById("selectAllTopicsButton"),!(u instanceof HTMLButtonElement))throw new TypeError(`${h.name}: ${null===u?"null":"non "+HTMLButtonElement.name} select all topics button.`);return u};let m;const p=()=>{if(m=document.getElementById("deselectAllTopicsButton"),!(m instanceof HTMLButtonElement))throw new TypeError(`${p.name}: ${null===m?"null":"non "+HTMLButtonElement.name} select all topics button.`);return m};let f;const L=()=>{if(f=document.getElementById("queryResultLimit"),!(f instanceof HTMLInputElement))throw new TypeError(`${L.name}: ${null===f?"null":"non "+HTMLInputElement.name} query result number input.`);return f};let g;const E=()=>{if(g=document.getElementById("getRecommendationsButton"),!(g instanceof HTMLButtonElement))throw new TypeError(`${E.name}: ${null===g?"null":"non "+HTMLButtonElement.name} get recommendations button.`);return g};let w;const b=()=>{if(w=document.getElementById("topicVisibilityDropdown"),!(w instanceof HTMLSelectElement))throw new TypeError(`${b.name}: ${null===w?"null":"non "+HTMLSelectElement.name} topic visibility dropdown.`);return w};let y;const v=()=>{if(y=document.getElementsByClassName("topicCheckbox"),!(y instanceof HTMLCollection))throw new TypeError(`${v.name}: ${null===y?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==y.length)throw new RangeError(`${v.name}: expected 12 elements, but instead got ${y.length}`);for(let e=0;e<y.length;++e){const t=y.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${v.name}: ${null===t?"null":"non "+HTMLInputElement.name} topic checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${v.name}: topic ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`)}return y};let T;const $=()=>{if(T=document.getElementsByClassName("subjectCheckbox"),!(T instanceof HTMLCollection))throw new TypeError(`${$.name}: ${null===T?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(85!==T.length)throw new RangeError(`${$.name}: expected 80 elements, but instead got ${T.length}`);for(let e=0;e<T.length;++e){const t=T.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${$.name}: ${null===t?"null":"non "+HTMLInputElement.name} subject checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${$.name}: subject ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`);for(const e of n)if(void 0===t.dataset[e])throw new Error(`${$.name}: undefined dataset property for subject checkbox: "${e}"`)}return T};let x;const k=()=>{if(x=document.getElementById("topicFieldsets")?.getElementsByTagName("fieldset"),!(x instanceof HTMLCollection))throw new TypeError(`${k.name}: ${null===x?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==x.length)throw new RangeError(`${k.name}: expected 12 elements, but instead got ${x.length}`);for(let e=0;e<x.length;++e){const t=x.item(e);if(!(t instanceof HTMLFieldSetElement))throw new TypeError(`${k.name}: ${null===t?"null":"non "+HTMLFieldSetElement.name} fieldset.`)}return x},B=e.p+"863c41354f8f48e66b97.svg";function H(e,t,n,l){if("string"!=typeof e)return H(e.title,e.cover_i,e.author_name[0],e.subject);if(null==n)throw new TypeError(`${H.name}: ${n} author string.`);if(null==l)throw new TypeError(`${H.name}: ${l} subjects string array.`);const o=document.createElement("p");o.classList.add("underline","text-lg","text-center"),o.textContent=e;const s=t?`https://covers.openlibrary.org/b/id/${t}-M.jpg`:B,c=document.createElement("img");c.classList.add("mx-auto","my-2"),c.src=s,c.alt=t?`${e} by ${n} cover`:"No cover image available";const i=document.createElement("p");i.classList.add("text-center"),i.textContent="by "+n;const r=document.createElement("p");r.classList.add("font-semibold","mt-3"),r.innerHTML='Subjects<hr class="h-px border-0 bg-gray-400">';const a=document.createElement("p");a.style.height="7rem",a.style.overflowY="auto",a.textContent=l.join(", ");const d=document.createElement("div");return d.classList.add("p-2","cursor-pointer","border","border-solid","border-gray-400"),d.appendChild(o),d.appendChild(c),d.appendChild(i),d.appendChild(r),d.appendChild(a),d}document.querySelector("body").prepend((()=>{const e=document.createElement("div");e.classList.add("flex","items-center");const n=document.createElement("img");n.width=125,n.height=100,n.src=t,n.alt="Bookworm logo";const l=document.createElement("h1");l.classList.add("text-pink","font-bold","text-4xl"),l.textContent="Book";const o=document.createElement("h1");o.classList.add("text-white","font-bold","text-4xl"),o.textContent="Worm",e.appendChild(n),e.appendChild(l),e.appendChild(o);const s=document.createElement("a");s.classList.add("inline-block","text-white","p-4","text-xl"),s.href="./index.html",s.textContent="Home";const c=document.createElement("a");c.classList.add("inline-block","text-white","p-4","text-xl"),c.href="./bestsellers.html",c.textContent="Bestsellers";const i=document.createElement("a");i.classList.add("inline-block","text-white","p-4","text-xl","whitespace-nowrap"),i.href="./for-you.html",i.textContent="For You";const r=document.createElement("a");r.classList.add("inline-block","text-white","p-4","text-xl"),r.href="./bookshelf.html",r.textContent="Bookshelf";const a=window.location.pathname;for(const e of[s,c,i,r])e.href.endsWith(a)&&e.classList.add("font-bold");const d=document.createElement("div");d.classList.add("flex","flex-nowrap"),d.appendChild(s),d.appendChild(c),d.appendChild(i),d.appendChild(r);const u=document.createElement("nav");return u.classList.add("flex","flex-wrap","justify-between","items-center","w-full","bg-green","px-8"),u.id="header",u.appendChild(e),u.appendChild(d),u})());const M=b(),C=h(),j=p(),I=v(),S=k(),R=L(),_=$(),N=r();R.value="12",M.value="show";for(let e=0;e<I.length;++e){const t=I.item(e);null!==t&&(t.checked=!1)}for(let e=0;e<_.length;++e){const t=_.item(e);null!==t&&(t.checked=!1)}var F,q,A,D,O;F=_,N.addEventListener("click",(()=>{for(let e=0;e<F.length;++e){const t=F.item(e);!0===t?.checked&&(t.checked=!1)}})),A=I,D=S,O=N,(q=M).addEventListener("change",(()=>{if("hide"!==q.value||O.classList.contains("hidden")){if("show"===q.value&&O.classList.contains("hidden"))for(let e=0;e<A.length;++e){const t=A.item(e);!0===t?.checked&&O.classList.remove("hidden")}}else O.classList.add("hidden");for(let e=0;e<A.length;++e){const t=A.item(e),n=null!==t?D.namedItem(t.name):null;"hide"!==q.value||null===n||n.classList.contains("hidden")?"show"===q.value&&!0===t?.checked&&null!==n&&n.classList.contains("hidden")&&n.classList.remove("hidden"):n.classList.add("hidden")}})),((e,t,n,l,o)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!1===n?.checked&&(n.checked=!0)}if("show"===n.value)for(let e=0;e<l.length;++e){const t=l.item(e);t?.classList.contains("hidden")&&t.classList.remove("hidden")}"show"===n.value&&o.classList.contains("hidden")&&o.classList.remove("hidden")}))})(C,I,M,S,N),((e,t,n,l)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!0===n?.checked&&(n.checked=!1)}for(let e=0;e<n.length;++e){const t=n.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}l.classList.contains("hidden")||l.classList.add("hidden")}))})(j,I,S,N),((e,t,n,l)=>{for(let o=0;o<e.length;++o){const s=e.item(o);s?.addEventListener("change",(()=>{const o=t.namedItem(s.name);!0===s.checked&&"show"===n.value?null!==o&&o.classList.contains("hidden")&&o.classList.remove("hidden"):null===o||o.classList.contains("hidden")||o.classList.add("hidden");e:for(let t=0;t<e.length;++t){const o=e.item(t);if(!0===o?.checked&&"show"===n.value&&l.classList.contains("hidden")){l.classList.remove("hidden");break e}l.classList.contains("hidden")||l.classList.add("hidden")}}))}})(I,S,M,N);const Q=E(),z=d(),J=c(),P=o(),W=c(),Y=new Set,V=[];var G,K,U,X,Z,ee,te,ne,le,oe;G=Y,K=_,U=V,X=z,Z=R,ee=M,te=S,ne=N,le=P,oe=W,Q.addEventListener("click",(async()=>{G.clear();for(let e=0;e<K.length;++e){const t=K.item(e),n=t?.dataset.openLibQuery;!0===t?.checked&&void 0!==n&&G.add(n)}if(0!==G.size){"show"===ee.value&&(ee.value="hide");for(let e=0;e<te.length;++e){const t=te.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}ne.classList.contains("hidden")||ne.classList.add("hidden"),0!==X.children.length&&(X.innerHTML=""),U.length=0,await Promise.all(Array.from(G).map((async e=>{await(async(e,t)=>fetch(`https://openlibrary.org/search.json?${e}${null!=t?"&limit="+String(t):""}`).then((e=>e.json())))(e,parseInt(Z.value)).then((e=>U.push(...e.docs)))}))),U.forEach((e=>{const t=H(e);X.appendChild(t)})),le.classList.contains("hidden")&&le.classList.remove("hidden"),oe.classList.contains("hidden")&&oe.classList.remove("hidden")}})),((e,t,n,l)=>{e.addEventListener("click",(()=>{0!==t.children.length&&(t.innerHTML=""),0!==n.length&&(n.length=0),l.classList.contains("hidden")||l.classList.add("hidden"),e.classList.add("hidden")}))})(P,z,V,J),((e,t,n)=>{e.addEventListener("click",(()=>{if(0===n.length)return;const e=localStorage.getItem(t);let l=null!==e?JSON.parse(e):[];0===l.length?l=n:l.push(...n.filter((e=>l.every((t=>{return n=e,!(null!=(l=t)&&n.title===l.title&&n.cover_i===l.cover_i&&n.author_name.length===l.author_name.length&&n.subject.length===l.subject.length&&n.author_name.every((e=>l.author_name.includes(e)))&&n.subject.every((e=>l.subject.includes(e))));var n,l}))))),localStorage.setItem(t,JSON.stringify(l))}))})(W,"openLibDocs",V)})()})();
//# sourceMappingURL=for-you.bundle.min.mjs.map