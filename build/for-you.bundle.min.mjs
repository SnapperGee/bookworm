(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var l=n.getElementsByTagName("script");if(l.length)for(var o=l.length-1;o>-1&&!t;)t=l[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{const t=e.p+"42970b2d7ce8340598b3.png",n=Object.freeze(["openLibQuery"]);let l;const o=()=>{if(l=document.getElementById("clearResultsButton"),!(l instanceof HTMLButtonElement))throw new TypeError(`${o.name}: ${null===l?"null":"non "+HTMLButtonElement.name} clear results button.`);return l};let s;const c=()=>{if(s=document.getElementById("saveResultsButton"),!(s instanceof HTMLButtonElement))throw new TypeError(`${c.name}: ${null===s?"null":"non "+HTMLButtonElement.name} save results button.`);return s};let i;const r=()=>{if(i=document.getElementById("clearSubjectsButton"),!(i instanceof HTMLButtonElement))throw new TypeError(`${r.name}: ${null===i?"null":"non "+HTMLButtonElement.name} clear subjects button.`);return i};let a;const d=()=>{if(a=document.getElementById("bookQueryResultCards"),!(a instanceof HTMLDivElement))throw new TypeError(`${d.name}: ${null===a?"null":"non "+HTMLDivElement.name} book query results card div.`);return a};let u;const m=()=>{if(u=document.getElementById("selectAllTopicsButton"),!(u instanceof HTMLButtonElement))throw new TypeError(`${m.name}: ${null===u?"null":"non "+HTMLButtonElement.name} select all topics button.`);return u};let h;const p=()=>{if(h=document.getElementById("deselectAllTopicsButton"),!(h instanceof HTMLButtonElement))throw new TypeError(`${p.name}: ${null===h?"null":"non "+HTMLButtonElement.name} select all topics button.`);return h};let f;const g=()=>{if(f=document.getElementById("queryResultLimit"),!(f instanceof HTMLInputElement))throw new TypeError(`${g.name}: ${null===f?"null":"non "+HTMLInputElement.name} query result number input.`);return f};let L;const E=()=>{if(L=document.getElementById("getRecommendationsButton"),!(L instanceof HTMLButtonElement))throw new TypeError(`${E.name}: ${null===L?"null":"non "+HTMLButtonElement.name} get recommendations button.`);return L};let w;const b=()=>{if(w=document.getElementById("topicVisibilityDropdown"),!(w instanceof HTMLSelectElement))throw new TypeError(`${b.name}: ${null===w?"null":"non "+HTMLSelectElement.name} topic visibility dropdown.`);return w};let y;const v=()=>{if(y=document.getElementsByClassName("topicCheckbox"),!(y instanceof HTMLCollection))throw new TypeError(`${v.name}: ${null===y?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==y.length)throw new RangeError(`${v.name}: expected 12 elements, but instead got ${y.length}`);for(let e=0;e<y.length;++e){const t=y.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${v.name}: ${null===t?"null":"non "+HTMLInputElement.name} topic checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${v.name}: topic ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`)}return y};let T;const x=()=>{if(T=document.getElementsByClassName("subjectCheckbox"),!(T instanceof HTMLCollection))throw new TypeError(`${x.name}: ${null===T?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(85!==T.length)throw new RangeError(`${x.name}: expected 80 elements, but instead got ${T.length}`);for(let e=0;e<T.length;++e){const t=T.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${x.name}: ${null===t?"null":"non "+HTMLInputElement.name} subject checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${x.name}: subject ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`);for(const e of n)if(void 0===t.dataset[e])throw new Error(`${x.name}: undefined dataset property for subject checkbox: "${e}"`)}return T};let $;const k=()=>{if($=document.getElementById("topicFieldsets")?.getElementsByTagName("fieldset"),!($ instanceof HTMLCollection))throw new TypeError(`${k.name}: ${null===$?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==$.length)throw new RangeError(`${k.name}: expected 12 elements, but instead got ${$.length}`);for(let e=0;e<$.length;++e){const t=$.item(e);if(!(t instanceof HTMLFieldSetElement))throw new TypeError(`${k.name}: ${null===t?"null":"non "+HTMLFieldSetElement.name} fieldset.`)}return $},C=e.p+"863c41354f8f48e66b97.svg",B=e.p+"5dfaf0de5d1c41fa290a.png",H=e.p+"57041bc9aad3ecc66f4e.png";function M(e,t,n,l){if("string"!=typeof e)return M(e.title,e.cover_i,e.author_name[0],e.subject);if(null==n)throw new TypeError(`${M.name}: ${n} author string.`);if(null==l)throw new TypeError(`${M.name}: ${l} subjects string array.`);const o=document.createElement("p");o.classList.add("underline","text-lg","text-center"),o.textContent=e;const s=t?`https://covers.openlibrary.org/b/id/${t}-M.jpg`:C,c=document.createElement("img");c.classList.add("mx-auto","my-2"),c.src=s,c.alt=t?`${e} by ${n} cover`:"No cover image available";const i=document.createElement("p");i.classList.add("text-center"),i.textContent="by "+n;const r=document.createElement("p");r.classList.add("font-semibold","mt-3"),r.innerHTML='Subjects<hr class="h-px border-0 bg-gray-400">';const a=document.createElement("p");a.style.height="7rem",a.style.overflowY="auto",a.textContent=l.join(", ");const d=document.createElement("div");return d.classList.add("p-2","border","border-solid","border-gray-400"),d.appendChild(o),d.appendChild(c),d.appendChild(i),d.appendChild(r),d.appendChild(a),function(e){if(e.querySelector(".icon-container"))return;const t=document.createElement("div");t.classList.add("flex","justify-end","top-2","right-2");const n=document.createElement("img");n.src=B,n.classList.add("inline-block","mr-3","cursor-pointer"),n.addEventListener("click",(t=>{t.stopPropagation(),function(e){const t=e.querySelector("p")||e.querySelector(".font-bold.text-orange"),n=e.querySelector(".author"),l=e.querySelector("img");l&&l.classList.add("w-64","h-64");const o={title:t?t.textContent:"",author:n?n.textContent:"",cover:l?l.src:""},s=JSON.parse(localStorage.getItem("favoriteBooks")||"[]");s.push(o),localStorage.setItem("favoriteBooks",JSON.stringify(s))}(e)}));const l=document.createElement("img");l.src=H,l.classList.add("inline-block","cursor-pointer"),t.appendChild(n),t.appendChild(l),e.appendChild(t)}(d),d}document.querySelector("body").prepend((()=>{const e=document.createElement("div");e.classList.add("flex","items-center");const n=document.createElement("img");n.width=125,n.height=100,n.src=t,n.alt="Bookworm logo";const l=document.createElement("h1");l.classList.add("text-pink","font-bold","text-4xl"),l.textContent="Book";const o=document.createElement("h1");o.classList.add("text-white","font-bold","text-4xl"),o.textContent="Worm",e.appendChild(n),e.appendChild(l),e.appendChild(o);const s=document.createElement("a");s.classList.add("inline-block","text-white","p-4","text-xl"),s.href="./index.html",s.textContent="Home";const c=document.createElement("a");c.classList.add("inline-block","text-white","p-4","text-xl"),c.href="./bestsellers.html",c.textContent="Bestsellers";const i=document.createElement("a");i.classList.add("inline-block","text-white","p-4","text-xl","whitespace-nowrap"),i.href="./for-you.html",i.textContent="For You";const r=document.createElement("a");r.classList.add("inline-block","text-white","p-4","text-xl"),r.href="./bookshelf.html",r.textContent="Bookshelf";const a=window.location.pathname;for(const e of[s,c,i,r])e.href.endsWith(a)&&e.classList.add("font-bold");const d=document.createElement("div");d.classList.add("flex","flex-nowrap"),d.appendChild(s),d.appendChild(c),d.appendChild(i),d.appendChild(r);const u=document.createElement("nav");return u.classList.add("flex","flex-wrap","justify-between","items-center","w-full","bg-green","px-8"),u.id="header",u.appendChild(e),u.appendChild(d),u})());const j=b(),I=m(),S=p(),q=v(),N=k(),R=g(),_=x(),F=r();R.value="12",j.value="show";for(let e=0;e<q.length;++e){const t=q.item(e);null!==t&&(t.checked=!1)}for(let e=0;e<_.length;++e){const t=_.item(e);null!==t&&(t.checked=!1)}var O,A,D,J,P;O=_,F.addEventListener("click",(()=>{for(let e=0;e<O.length;++e){const t=O.item(e);!0===t?.checked&&(t.checked=!1)}})),D=q,J=N,P=F,(A=j).addEventListener("change",(()=>{if("hide"!==A.value||P.classList.contains("hidden")){if("show"===A.value&&P.classList.contains("hidden"))for(let e=0;e<D.length;++e){const t=D.item(e);!0===t?.checked&&P.classList.remove("hidden")}}else P.classList.add("hidden");for(let e=0;e<D.length;++e){const t=D.item(e),n=null!==t?J.namedItem(t.name):null;"hide"!==A.value||null===n||n.classList.contains("hidden")?"show"===A.value&&!0===t?.checked&&null!==n&&n.classList.contains("hidden")&&n.classList.remove("hidden"):n.classList.add("hidden")}})),((e,t,n,l,o)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!1===n?.checked&&(n.checked=!0)}if("show"===n.value)for(let e=0;e<l.length;++e){const t=l.item(e);t?.classList.contains("hidden")&&t.classList.remove("hidden")}"show"===n.value&&o.classList.contains("hidden")&&o.classList.remove("hidden")}))})(I,q,j,N,F),((e,t,n,l)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!0===n?.checked&&(n.checked=!1)}for(let e=0;e<n.length;++e){const t=n.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}l.classList.contains("hidden")||l.classList.add("hidden")}))})(S,q,N,F),((e,t,n,l)=>{for(let o=0;o<e.length;++o){const s=e.item(o);s?.addEventListener("change",(()=>{const o=t.namedItem(s.name);!0===s.checked&&"show"===n.value?null!==o&&o.classList.contains("hidden")&&o.classList.remove("hidden"):null===o||o.classList.contains("hidden")||o.classList.add("hidden");e:for(let t=0;t<e.length;++t){const o=e.item(t);if(!0===o?.checked&&"show"===n.value&&l.classList.contains("hidden")){l.classList.remove("hidden");break e}l.classList.contains("hidden")||l.classList.add("hidden")}}))}})(q,N,j,F);const Q=E(),z=d(),W=c(),Y=o(),V=c(),G=new Set,K=[];var U,X,Z,ee,te,ne,le,oe,se,ce;U=G,X=_,Z=K,ee=z,te=R,ne=j,le=N,oe=F,se=Y,ce=V,Q.addEventListener("click",(async()=>{U.clear();for(let e=0;e<X.length;++e){const t=X.item(e),n=t?.dataset.openLibQuery;!0===t?.checked&&void 0!==n&&U.add(n)}if(0!==U.size){"show"===ne.value&&(ne.value="hide");for(let e=0;e<le.length;++e){const t=le.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}oe.classList.contains("hidden")||oe.classList.add("hidden"),0!==ee.children.length&&(ee.innerHTML=""),Z.length=0,await Promise.all(Array.from(U).map((async e=>{await(async(e,t)=>fetch(`https://openlibrary.org/search.json?${e}${null!=t?"&limit="+String(t):""}`).then((e=>e.json())))(e,parseInt(te.value)).then((e=>Z.push(...e.docs)))}))),Z.forEach((e=>{const t=M(e);ee.appendChild(t)})),se.classList.contains("hidden")&&se.classList.remove("hidden"),ce.classList.contains("hidden")&&ce.classList.remove("hidden")}})),((e,t,n,l)=>{e.addEventListener("click",(()=>{0!==t.children.length&&(t.innerHTML=""),0!==n.length&&(n.length=0),l.classList.contains("hidden")||l.classList.add("hidden"),e.classList.add("hidden")}))})(Y,z,K,W),((e,t,n)=>{e.addEventListener("click",(()=>{if(0===n.length)return;const e=localStorage.getItem(t);let l=null!==e?JSON.parse(e):[];0===l.length?l=n:l.push(...n.filter((e=>l.every((t=>{return n=e,!(null!=(l=t)&&n.title===l.title&&n.cover_i===l.cover_i&&n.author_name.length===l.author_name.length&&n.subject.length===l.subject.length&&n.author_name.every((e=>l.author_name.includes(e)))&&n.subject.every((e=>l.subject.includes(e))));var n,l}))))),localStorage.setItem(t,JSON.stringify(l))}))})(V,"openLibDocs",K)})()})();
//# sourceMappingURL=for-you.bundle.min.mjs.map