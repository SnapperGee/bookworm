(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var l=n.getElementsByTagName("script");if(l.length)for(var o=l.length-1;o>-1&&!t;)t=l[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{const t=e.p+"42970b2d7ce8340598b3.png",n=Object.freeze(["openLibQuery"]);let l;const o=()=>{if(l=document.getElementById("clearResultsButton"),!(l instanceof HTMLButtonElement))throw new TypeError(`${o.name}: ${null===l?"null":"non "+HTMLButtonElement.name} clear results button.`);return l};let s;const c=()=>{if(s=document.getElementById("saveResultsButton"),!(s instanceof HTMLButtonElement))throw new TypeError(`${c.name}: ${null===s?"null":"non "+HTMLButtonElement.name} save results button.`);return s};let i;const a=()=>{if(i=document.getElementById("clearSubjectsButton"),!(i instanceof HTMLButtonElement))throw new TypeError(`${a.name}: ${null===i?"null":"non "+HTMLButtonElement.name} clear subjects button.`);return i};let r;const d=()=>{if(r=document.getElementById("bookQueryResultCards"),!(r instanceof HTMLDivElement))throw new TypeError(`${d.name}: ${null===r?"null":"non "+HTMLDivElement.name} book query results card div.`);return r};let m;const u=()=>{if(m=document.getElementById("selectAllTopicsButton"),!(m instanceof HTMLButtonElement))throw new TypeError(`${u.name}: ${null===m?"null":"non "+HTMLButtonElement.name} select all topics button.`);return m};let h;const p=()=>{if(h=document.getElementById("deselectAllTopicsButton"),!(h instanceof HTMLButtonElement))throw new TypeError(`${p.name}: ${null===h?"null":"non "+HTMLButtonElement.name} select all topics button.`);return h};let f;const L=()=>{if(f=document.getElementById("queryResultLimit"),!(f instanceof HTMLInputElement))throw new TypeError(`${L.name}: ${null===f?"null":"non "+HTMLInputElement.name} query result number input.`);return f};let g;const E=()=>{if(g=document.getElementById("getRecommendationsButton"),!(g instanceof HTMLButtonElement))throw new TypeError(`${E.name}: ${null===g?"null":"non "+HTMLButtonElement.name} get recommendations button.`);return g};let b;const w=()=>{if(b=document.getElementById("topicVisibilityDropdown"),!(b instanceof HTMLSelectElement))throw new TypeError(`${w.name}: ${null===b?"null":"non "+HTMLSelectElement.name} topic visibility dropdown.`);return b};let y;const v=()=>{if(y=document.getElementsByClassName("topicCheckbox"),!(y instanceof HTMLCollection))throw new TypeError(`${v.name}: ${null===y?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==y.length)throw new RangeError(`${v.name}: expected 12 elements, but instead got ${y.length}`);for(let e=0;e<y.length;++e){const t=y.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${v.name}: ${null===t?"null":"non "+HTMLInputElement.name} topic checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${v.name}: topic ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`)}return y};let T;const $=()=>{if(T=document.getElementsByClassName("subjectCheckbox"),!(T instanceof HTMLCollection))throw new TypeError(`${$.name}: ${null===T?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(85!==T.length)throw new RangeError(`${$.name}: expected 80 elements, but instead got ${T.length}`);for(let e=0;e<T.length;++e){const t=T.item(e);if(!(t instanceof HTMLInputElement))throw new TypeError(`${$.name}: ${null===t?"null":"non "+HTMLInputElement.name} subject checkbox.`);if("checkbox"!==t.type)throw new TypeError(`${$.name}: subject ${HTMLInputElement.name} with non-checkbox type: "${t.type}"`);for(const e of n)if(void 0===t.dataset[e])throw new Error(`${$.name}: undefined dataset property for subject checkbox: "${e}"`)}return T};let k;const x=()=>{if(k=document.getElementById("topicFieldsets")?.getElementsByTagName("fieldset"),!(k instanceof HTMLCollection))throw new TypeError(`${x.name}: ${null===k?"null":"non "+HTMLCollection.name} of subject checkboxes.`);if(12!==k.length)throw new RangeError(`${x.name}: expected 12 elements, but instead got ${k.length}`);for(let e=0;e<k.length;++e){const t=k.item(e);if(!(t instanceof HTMLFieldSetElement))throw new TypeError(`${x.name}: ${null===t?"null":"non "+HTMLFieldSetElement.name} fieldset.`)}return k},C=e.p+"863c41354f8f48e66b97.svg";function B(e,t,n,l){if("string"!=typeof e)return B(e.title,e.cover_i,e.author_name[0],e.subject);if(null==n)throw new TypeError(`${B.name}: ${n} author string.`);if(null==l)throw new TypeError(`${B.name}: ${l} subjects string array.`);const o=document.createElement("p");o.classList.add("underline","text-lg","text-center"),o.textContent=e;const s=t?`https://covers.openlibrary.org/b/id/${t}-M.jpg`:C,c=document.createElement("img");c.classList.add("mx-auto","my-2"),c.src=s,c.alt=t?`${e} by ${n} cover`:"No cover image available";const i=document.createElement("p");i.classList.add("text-center"),i.textContent="by "+n;const a=document.createElement("p");a.classList.add("font-semibold","mt-3"),a.innerHTML="Subjects<hr>";const r=document.createElement("p");r.style.height="7rem",r.style.overflowY="auto",r.textContent=l.join(", ");const d=document.createElement("div");return d.classList.add("p-2","cursor-pointer","border","border-solid","border-gray-300"),d.appendChild(o),d.appendChild(c),d.appendChild(i),d.appendChild(a),d.appendChild(r),d}document.querySelector("body").prepend((()=>{const e=document.createElement("nav");e.classList.add("w-full","z-30","top-0","py-1","lg:py-6","bg-green"),e.id="header";const n=document.createElement("div");n.classList.add("w-full","container","mx-auto","flex","flex-wrap","items-center","justify-between","mt-0","p-2","lg:py-6");const l=document.createElement("div");l.classList.add("pl-4","flex","items-center");const o=document.createElement("img");o.classList.add("h-10","w-10"),o.src=t,o.alt="Bookworm Logo";const s=document.createElement("h1");s.classList.add("text-pink","font-bold","text-2xl"),s.textContent="Book";const c=document.createElement("h1");c.classList.add("text-white","font-bold","text-2xl"),c.textContent="Worm";const i=document.createElement("div");i.classList.add("w-full","lg:flex","lg:w-auto","mt-2","lg:mt-0","p-4","lg:p-0"),i.id="nav-content";const a=document.createElement("ul");a.classList.add("list-reset","lg:flex","justify-end","flex-1","items-center");const r=document.createElement("li");r.classList.add("mr-3");const d=document.createElement("a");d.classList.add("inline-block","text-white","p-4"),d.href="./index.html",d.textContent="Home";const m=document.createElement("a");m.classList.add("inline-block","text-white","p-4"),m.href="./bestsellers.html",m.textContent="Bestsellers";const u=document.createElement("a");u.classList.add("inline-block","text-white","p-4"),u.href="./for-you.html",u.textContent="For You";const h=document.createElement("a");switch(h.classList.add("inline-block","text-white","p-4"),h.href="./bookshelf.html",h.textContent="Bookshelf",e.appendChild(n),n.appendChild(l),l.appendChild(o),l.appendChild(s),l.appendChild(c),n.appendChild(i),n.appendChild(a),a.appendChild(r),r.appendChild(d),r.appendChild(m),r.appendChild(u),r.appendChild(h),window.location.pathname.split("/").pop()){case"index.html":default:d.classList.add("font-bold");break;case"bestsellers.html":m.classList.add("font-bold");break;case"genre-recommendations.html":u.classList.add("font-bold");break;case"bookshelf.html":h.classList.add("font-bold")}return e})());const H=w(),M=u(),j=p(),I=v(),S=x(),R=L(),_=$(),N=a();R.value="12",H.value="show";for(let e=0;e<I.length;++e){const t=I.item(e);null!==t&&(t.checked=!1)}for(let e=0;e<_.length;++e){const t=_.item(e);null!==t&&(t.checked=!1)}var F,q,A,D,z;F=_,N.addEventListener("click",(()=>{for(let e=0;e<F.length;++e){const t=F.item(e);!0===t?.checked&&(t.checked=!1)}})),A=I,D=S,z=N,(q=H).addEventListener("change",(()=>{if("hide"!==q.value||z.classList.contains("hidden")){if("show"===q.value&&z.classList.contains("hidden"))for(let e=0;e<A.length;++e){const t=A.item(e);!0===t?.checked&&z.classList.remove("hidden")}}else z.classList.add("hidden");for(let e=0;e<A.length;++e){const t=A.item(e),n=null!==t?D.namedItem(t.name):null;"hide"!==q.value||null===n||n.classList.contains("hidden")?"show"===q.value&&!0===t?.checked&&null!==n&&n.classList.contains("hidden")&&n.classList.remove("hidden"):n.classList.add("hidden")}})),((e,t,n,l,o)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!1===n?.checked&&(n.checked=!0)}if("show"===n.value)for(let e=0;e<l.length;++e){const t=l.item(e);t?.classList.contains("hidden")&&t.classList.remove("hidden")}"show"===n.value&&o.classList.contains("hidden")&&o.classList.remove("hidden")}))})(M,I,H,S,N),((e,t,n,l)=>{e.addEventListener("click",(()=>{for(let e=0;e<t.length;++e){const n=t.item(e);!0===n?.checked&&(n.checked=!1)}for(let e=0;e<n.length;++e){const t=n.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}l.classList.contains("hidden")||l.classList.add("hidden")}))})(j,I,S,N),((e,t,n,l)=>{for(let o=0;o<e.length;++o){const s=e.item(o);s?.addEventListener("change",(()=>{const o=t.namedItem(s.name);!0===s.checked&&"show"===n.value?null!==o&&o.classList.contains("hidden")&&o.classList.remove("hidden"):null===o||o.classList.contains("hidden")||o.classList.add("hidden");e:for(let t=0;t<e.length;++t){const o=e.item(t);if(!0===o?.checked&&"show"===n.value&&l.classList.contains("hidden")){l.classList.remove("hidden");break e}l.classList.contains("hidden")||l.classList.add("hidden")}}))}})(I,S,H,N);const O=E(),Q=d(),J=c(),P=o(),Y=c(),V=new Set,W=[];var G,K,U,X,Z,ee,te,ne,le,oe;G=V,K=_,U=W,X=Q,Z=R,ee=H,te=S,ne=N,le=P,oe=Y,O.addEventListener("click",(async()=>{G.clear();for(let e=0;e<K.length;++e){const t=K.item(e),n=t?.dataset.openLibQuery;!0===t?.checked&&void 0!==n&&G.add(n)}if(0!==G.size){"show"===ee.value&&(ee.value="hide");for(let e=0;e<te.length;++e){const t=te.item(e);null===t||t.classList.contains("hidden")||t.classList.add("hidden")}ne.classList.contains("hidden")||ne.classList.add("hidden"),0!==X.children.length&&(X.innerHTML=""),U.length=0,await Promise.all(Array.from(G).map((async e=>{await(async(e,t)=>fetch(`https://openlibrary.org/search.json?${e}${null!=t?"&limit="+String(t):""}`).then((e=>e.json())))(e,parseInt(Z.value)).then((e=>U.push(...e.docs)))}))),U.forEach((e=>{const t=B(e);X.appendChild(t)})),le.classList.contains("hidden")&&le.classList.remove("hidden"),oe.classList.contains("hidden")&&oe.classList.remove("hidden")}})),((e,t,n,l)=>{e.addEventListener("click",(()=>{0!==t.children.length&&(t.innerHTML=""),0!==n.length&&(n.length=0),l.classList.contains("hidden")||l.classList.add("hidden"),e.classList.add("hidden")}))})(P,Q,W,J),((e,t,n)=>{e.addEventListener("click",(()=>{if(0===n.length)return;const e=localStorage.getItem(t);let l=null!==e?JSON.parse(e):[];0===l.length?l=n:l.push(...n.filter((e=>l.every((t=>{return n=e,!(null!=(l=t)&&n.title===l.title&&n.cover_i===l.cover_i&&n.author_name.length===l.author_name.length&&n.subject.length===l.subject.length&&n.author_name.every((e=>l.author_name.includes(e)))&&n.subject.every((e=>l.subject.includes(e))));var n,l}))))),localStorage.setItem(t,JSON.stringify(l))}))})(Y,"openLibDocs",W)})()})();
//# sourceMappingURL=for-you.bundle.min.mjs.map